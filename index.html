<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <!-- Styles Import -->
  <link rel="stylesheet" href="style.css">
  <title>Mapping Colombia</title>
  <!-- Mapbox GL JS CSS -->
  <link href="https://api.mapbox.com/mapbox-gl-js/v3.11.0/mapbox-gl.css" rel="stylesheet" />
</head>

<body>
  <!-- Introduction / Hook Section -->
  <header>

    <h1>Defeating Dengue: A Colombia Health Mapping Project</h1>

    <p>
      Dengue fever, a viral illness transmitted by Aedes (Aedes aegypti) mosquitoes,
      is a growing public health concern in tropical regions worldwide.
      In Colombia, the disease has seen significant variations in incidence from 2007 to 2018,
      with the eastern regions of the country consistently reporting the highest rates. These areas,
      characterized by warm temperatures and tropical landscapes, provide ideal conditions for the Aedes mosquitoes,
      which thrive in humid environments with stagnant water.
    </p>
    <p>
      This project explores the geographical factors that influence the spread of dengue in Colombia.
      By mapping dengue trends over time, we can better understand how regional variations and climate conditions
      contribute to the disease's distribution. The heatmap visual presents a clear picture of dengue incidence across
      the country,
      while the top 10 municipal bar graph highlights the areas most affected by the virus.
      Through this analysis, we aim to find patterns and conclusions on the complex relationship between environmental
      and infrastructural factors
      that shape the spread of this mosquito-borne disease in Colombia.

    </p>

  </header>

  <div id="slider-container">
    <span id="slider-value"><strong>2007</strong></span>
    <input type="range" name="slider" id="slider" min="2007" max="2018" step="1" value="2007">
    <div id="slider-labels">
      <span>2007</span>
      <span>2018</span>
    </div>
  </div>


  <main>
    <!-- Map Section -->
    <div id="left-column">
      <!-- <p><strong>Incidence Rate per 100,000 People</strong></p> -->
      <div class="select-wrapper">
        <select id="dataType">
          <option value="incident">Incidence Rate per 100,000 People</option>
          <option value="temp">Peak Temperature in Celsius</option>
          <option value="prec">Average Precipitation in Millimeters</option>
        </select>
      </div>
      <div id="legend"></div>
      <svg id="map"></svg>
      <div id="tooltip"></div>
    </div>

    <!-- Story and Bar Plot Section -->
    <div id="right-column">
      <p><strong>Top 10 Most Affected Areas</strong></p>
      <div id="bar-chart-container">
        <svg id="bar-chart"></svg>
      </div>
      <p><strong>Context</strong></p>
      <div class="story"></div>
    </div>
  </main>
  <div id="mapinfo">
    <p><em>Stars represent Colombia's most populous cities. Click on a star or on a bar in the graph to zoom.</em></p>
  </div>

  <br><br><br>
  <h2>What Other Variables Have an Effect on Dengue Cases?</h2>

  <p id="desc">
    In addition to time series values, our dataset contains general statistics of each muicipality not directly tied to 
    a certain year. These include <em>literacy rates, secondary education rates, unemployment rates, percentage of
    households without water, and percentage of households without internet access</em>. The goal of mapping these 
    statistics is to determine if there are any geographical trends that correlate with these factors, and to analyze 
    if these factors have an influence on the incidence rates of dengue fever. Specifically, we want to determine if 
    there exists a correlation between the municipalities with high incidence rates and high disparities.
  </p>

  <div id="left-column">
    <div class="select-wrapper">
      <select id="socialDataType">
        <option value="illiterate">Illiteracy Rate (%)</option>
        <option value="education">Secondary / Higher Education (%)</option>
        <option value="unemployed">Unemployed Population (%)</option>
        <option value="water">Households Without Water Access (%)</option>
        <option value="internet">Households Without Internet Access (%)</option>
      </select>
    </div>
    <div id="new-legend"></div>
    <svg id="new-map"></svg>
  </div>
  <div id="mapinfo">
    <p><em>Incidence, Temperature, and Precipitation data are dependent on the slider in the first map. Update the 
      slider to see more yearly data.</em></p>
  </div>

  <br><br><br>
  <h2>Does Elevation influence any of the above factors?</h2>

  <p id="desc">
    You might have noticed a few interesting occurences in the Incidence map. First, there are a few locations where 
    the incidence rate remains relatively low thoughout the years, despite having neighboring municipalities with 
    drastically changing indicence rates. Specifically, there seems to be a cluster of municipalities in central and 
    southwestern Colombia that share this trait. Additionally, these regions have historically low temperature and 
    rainfall recordings. Is there an outside variable that can explain these coincidences? The map below showcases the 
    geographical landscape of Colombia, as well as topographic markers describing the elevation in those regions. By 
    mapping these additional features, we aim to capture more information about the relationship between incidence 
    rates and the potential factors that correspond to them.
  </p>

  <div id="mapbox-legend"></div>
  <div id="mapbox">
    <svg></svg>
  </div>
  <div id="mapinfo">
    <p><em>Topography lines describe the elevation above sea level (in meters).</em></p>
  </div>
  <!-- Mapbox GL JS JavaScript -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v3.11.0/mapbox-gl.js"></script>
  <!-- Load D3.js from CDN -->
  <script src="https://d3js.org/d3.v7.min.js"></script>    
  <!-- Load your custom map initialization script -->
  <script type="module" src="mapbox.js"></script>

  <!-- Extra Content Below the Main Section -->
  <div class="conclusion">
    <h2>Key Takeways</h2>
    <p>
      Through the analysis of dengue fever cases in Colombia from 2007 to 2018, several important trends emerge. First,
      municipalities like Florencia, Fortul, and Nilo consistently appear as hotspots in different years, highlighting
      that certain areas are more vulnerable due to localized environmental or social factors. Epidemic years, such as
      2010, show dramatic spikes in incidence rates, suggesting that dengue outbreaks can escalate rapidly
      under specific conditions. Conversely, endemic years like 2011, 2017, and 2018 show much lower case numbers,
      indicating periods of relative control. The shifting locations of outbreaks suggest that while some areas improve
      (e.g., Florencia after 2011), others can become new centers for the virus (e.g., Nilo in later years).
      Importantly, western Pacific coastal municipalities remain consistently low in incidence, likely due to their
      colder and wetter climates, which inhibit mosquito breeding. Overall, this analysis emphasizes the dynamic nature
      of dengue outbreaks, the need for targeted public health interventions in high-risk municipalities, and the
      importance of understanding local environmental and socio-economic factors that drive these patterns.
    </p>
  </div>

  <!-- Single Script Import After D3 -->
  <script src="https://cdn.jsdelivr.net/npm/d3@7"></script>
  <script type="module" src="main.js"></script>
</body>

</html>